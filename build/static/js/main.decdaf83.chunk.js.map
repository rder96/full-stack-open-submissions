{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","personsService","getAll","axios","get","then","response","data","create","newObject","post","update","id","newOject","put","remove","delete","Person","person","deletePerson","name","number","onClick","value","Filter","text","newSearch","handleNewSearch","onChange","Persons","persons","map","x","filter","toLowerCase","startsWith","PersonForm","addNewPerson","newName","newNumber","handleNameChange","handleNumberChange","onSubmit","type","Notification","notification","style","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","marginLeft","message","App","useState","setPersons","setNewName","setNewNumber","setNewSearch","setNotification","notifyWith","setTimeout","useEffect","event","target","preventDefault","includes","window","confirm","personId","find","catch","error","concat","console","log","personName","toString","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.decdaf83.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = (newObject) => {\n    const request = axios.post(baseUrl, newObject)\n    return request.then(response => response.data)\n}\n\nconst update = (id, newOject) => { \n    const request = axios.put(`${baseUrl}/${id}`, newOject)\n    return request.then(response => response.data)\n}\n\n// can't make delete a variable name! it's reserved\nconst remove = (id) => {\n    const request = axios.delete(`${baseUrl}/${id}`) \n    return request\n}\n\nconst personsService = { getAll, create, update, remove }\nexport default personsService","import React, { useState, useEffect } from 'react'\nimport personsService from './services/persons'\n\nconst Person = ( {person, deletePerson} ) => { \n  return (\n      <>\n        <div>{person.name} {person.number} <button onClick={deletePerson} value={person.id}>delete</button></div>\n      </>\n  )\n}\n\nconst Filter = ( {text, newSearch, handleNewSearch} ) =>\n    <div>{text}<input value={newSearch} onChange={handleNewSearch} /></div>\n\nconst Persons = ( {persons, newSearch, deletePerson} ) => { \n  if (newSearch === \"\") {\n    return persons.map(x => <Person key={x.name} person={x} deletePerson={deletePerson}/>)\n  }\n  return persons.filter(x => x.name.toLowerCase().startsWith(newSearch.toLowerCase())).map(x => \n    <Person key={x.name} person={x} deletePerson={deletePerson} /> \n  )\n}\n\nconst PersonForm = ( {addNewPerson, newName, newNumber, handleNameChange, handleNumberChange} ) => { \n  return (\n    <form onSubmit={addNewPerson}>\n      <div>\n        name: <input value={newName} onChange={handleNameChange} />\n      </div>\n      <div>\n          number: <input value={newNumber} onChange={handleNumberChange} />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  )  \n}\n\nconst Notification = ({ notification }) => {\n  const success = {\n    color: 'green',  \n    background: 'lightgrey', \n    fontSize: 20,\n    borderStyle: 'solid', \n    borderRadius: 5,\n    padding: 10, \n    marginBottom: 10,\n    marginLeft: 5\n  }\n\n  const error = {\n    color: 'red', \n    background: 'lightgrey', \n    fontSize: 20,\n    borderStyle: 'solid', \n    borderRadius: 5,\n    padding: 10, \n    marginBottom: 10,\n    marginLeft: 5\n  }\n\n  if (notification === null) {\n    return null\n  } else {\n    if (notification.type === 'success') {\n      return (\n        <>\n          <div style={success}>{notification.message}</div>\n        </>\n      )\n    } else {\n      return (\n        <>\n          <div style={error}>{notification.message}</div>\n        </>\n      )\n    }\n  }\n\n} \n\nconst App = () => {\n  const [ persons, setPersons] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ newSearch, setNewSearch ] = useState('')\n  const [ notification, setNotification ] = useState(null)\n\n  const handleNameChange = (event) =>\n    setNewName(event.target.value)\n  \n  const handleNumberChange = (event) => \n    setNewNumber(event.target.value)\n\n  const handleNewSearch = (event) => \n    setNewSearch(event.target.value)   \n\n  const notifyWith = (message, type='success') => {\n    setNotification({ message, type })\n    setTimeout(() => {\n      setNotification(null)\n    }, 5000)\n  }\n  \n  const addNewPerson = (event) => {\n    event.preventDefault()\n    if (persons.map(x => x.name).includes(newName)) {\n      if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\n        const personId = persons.find(x => x.name === newName).id\n        personsService \n          .update(personId, {name: newName, number: newNumber})\n          .then(response => {\n            notifyWith(`Changed ${newName}'s number`)\n            setPersons(persons.map(x => x.id !== response.id ? x : response))\n            setNewName('')\n            setNewNumber('')\n          })\n          .catch(error => {\n            notifyWith(error.response.data.error, 'error')\n           })\n      }\n      setNewName('')\n      setNewNumber('')\n    } else {\n        personsService\n          .create({ name: newName, number: newNumber })\n          .then(response => {\n            setPersons(persons.concat(response))\n            notifyWith(`Added ${newName}`)\n            setNewName('')\n            setNewNumber('')\n          })\n          .catch(error => {\n            console.log(error.response.data.error)\n            notifyWith(error.response.data.error, 'error')\n          })\n    }\n  }\n\n  const deletePerson = (event) => { \n    event.preventDefault()\n    const id = event.target.value\n    const personName = persons.find(x => x.id.toString() === id).name\n    if (window.confirm(`Delete ${personName} ?`)) { \n      personsService\n      .remove(id)\n      .then(() => {\n        setPersons(persons.filter(x => x.id.toString() !== id))\n      })\n      .catch(error => {\n        notifyWith(`Information of ${personName} has already been removed from the server`, 'error')\n        setPersons(persons.filter(x => x.id.toString() !== id))\n      })\n    }\n  }\n\n  useEffect(() => {\n    personsService\n      .getAll()\n      .then(response => setPersons(response))\n  }, [])\n  \n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification notification={notification} />\n      <Filter text=\"filter shown with\" newSearch={newSearch} handleNewSearch={handleNewSearch} />\n      <h3>add a new</h3>\n      <PersonForm \n        newName={newName} newNumber={newNumber} handleNameChange={handleNameChange} handleNumberChange={handleNumberChange} addNewPerson={addNewPerson} \n      />\n      <h3>Numbers</h3>\n      <Persons persons={persons} newSearch={newSearch} deletePerson={deletePerson}/>\n    </div>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}