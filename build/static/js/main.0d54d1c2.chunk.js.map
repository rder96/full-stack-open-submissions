{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","newOject","put","delete","Person","person","deletePerson","name","number","onClick","value","Filter","text","newSearch","handleNewSearch","onChange","Persons","persons","map","x","filter","toLowerCase","startsWith","PersonForm","addNewPerson","newName","newNumber","handleNameChange","handleNumberChange","onSubmit","type","Notification","msg","msgStyle","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","marginLeft","style","App","useState","setPersons","setNewName","setNewNumber","setNewSearch","errorMessage","setErrorMessage","useEffect","personsService","event","target","preventDefault","includes","window","confirm","personId","find","setTimeout","catch","error","concat","console","log","personName","toString","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.0d54d1c2.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = newObject => {\n    const request = axios.post(baseUrl, newObject)\n    return request.then(response => response.data)\n}\n\nconst update = (id, newOject) => { \n    const request = axios.put(`${baseUrl}/${id}`, newOject)\n    return request.then(response => response.data)\n}\n\n// can't make delete a variable name! it's reserved\nconst remove = id => {\n    const request = axios.delete(`${baseUrl}/${id}`) \n    return request\n}\n\nexport default { getAll, create, update, remove }","import React, { useState, useEffect } from 'react'\nimport personsService from './services/persons'\n\nconst Person = ( {person, deletePerson} ) => { \n  return (\n      <>\n        <div>{person.name} {person.number} <button onClick={deletePerson} value={person.id}>delete</button></div>\n      </>\n  )\n}\n\nconst Filter = ( {text, newSearch, handleNewSearch} ) =>\n    <div>{text}<input value={newSearch} onChange={handleNewSearch} /></div>\n\nconst Persons = ( {persons, newSearch, deletePerson} ) => { \n  if (newSearch === \"\") {\n    return persons.map(x => <Person key={x.name} person={x} deletePerson={deletePerson}/>)\n  }\n  return persons.filter(x => x.name.toLowerCase().startsWith(newSearch.toLowerCase())).map(x => \n    <Person key={x.name} person={x} deletePerson={deletePerson} /> \n  )\n}\n\nconst PersonForm = ( {addNewPerson, newName, newNumber, handleNameChange, handleNumberChange} ) => { \n  return (\n    <form onSubmit={addNewPerson}>\n      <div>\n        name: <input value={newName} onChange={handleNameChange} />\n      </div>\n      <div>\n          number: <input value={newNumber} onChange={handleNumberChange} />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  )  \n}\n\nconst Notification = ({ msg }) => {\n  const msgStyle = {\n    color: 'green',  \n    background: 'lightgrey', \n    fontSize: 20,\n    borderStyle: 'solid', \n    borderRadius: 5,\n    padding: 10, \n    marginBottom: 10,\n    marginLeft: 5\n  }\n\n  if (msg === null) {\n    return null\n  } else {\n    // it would be better not to handcode this and do success/failed \n    msg.startsWith('Changed') || msg.startsWith('Added') ? msgStyle.color = 'green' : msgStyle.color = 'red'\n    return (\n      <>\n        <div style={msgStyle}>{msg}</div>\n      </>\n    )\n  }\n\n} \n\nconst App = () => {\n  const [ persons, setPersons] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ newSearch, setNewSearch ] = useState('')\n  const [ errorMessage, setErrorMessage ] = useState(null)\n\n  const handleNameChange = (event) =>\n    setNewName(event.target.value)\n  \n  const handleNumberChange = (event) => \n    setNewNumber(event.target.value)\n\n  const handleNewSearch = (event) => \n    setNewSearch(event.target.value)   \n\n  const addNewPerson = (event) => {\n    event.preventDefault()\n    if (persons.map(x => x.name).includes(newName)) {\n      if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\n        const personId = persons.find(x => x.name === newName).id\n        personsService \n          .update(personId, {name: newName, number: newNumber})\n          .then(response => {\n            setPersons(persons.map(x => x.id !== response.id ? x : response))\n            setNewName('')\n            setNewNumber('')\n            setErrorMessage(`Changed ${newName}'s number`)\n            setTimeout(() => {\n              setErrorMessage(null)\n            }, 5000)\n          })\n          .catch(error => {\n            setErrorMessage(`Information of ${newName} has already been removed from the server`)\n            setPersons(persons.filter(x => x.name !== newName))\n           })\n      }\n      setNewName('')\n      setNewNumber('')\n    } else {\n        personsService\n          .create({ name: newName, number: newNumber })\n          .then(response => {\n            setPersons(persons.concat(response)) \n            setNewName('')\n            setNewNumber('')\n            setErrorMessage(`Added ${newName}`)\n            setTimeout(() => {\n              setErrorMessage(null)\n            }, 5000)\n          })\n          .catch(error => console.log(error))\n    }\n  }\n\n  const deletePerson = (event) => { \n    event.preventDefault()\n    const id = event.target.value\n    const personName = persons.find(x => x.id.toString() === id).name\n    if (window.confirm(`Delete ${personName} ?`)) { \n      personsService\n      .remove(id)\n      .then(() => {\n        setPersons(persons.filter(x => x.id.toString() !== id))\n      })\n      .catch(error => {\n        setErrorMessage(`Information of ${personName} has already been removed from the server`)\n        setPersons(persons.filter(x => x.id.toString() !== id))\n      })\n    }\n  }\n\n  useEffect(() => {\n    personsService\n      .getAll()\n      .then(response => setPersons(response))\n  }, [])\n  \n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification msg={errorMessage} />\n      <Filter text=\"filter shown with\" newSearch={newSearch} handleNewSearch={handleNewSearch} />\n      <h3>add a new</h3>\n      <PersonForm \n        newName={newName} newNumber={newNumber} handleNameChange={handleNameChange} handleNumberChange={handleNumberChange} addNewPerson={addNewPerson} \n      />\n      <h3>Numbers</h3>\n      <Persons persons={persons} newSearch={newSearch} deletePerson={deletePerson}/>\n    </div>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}